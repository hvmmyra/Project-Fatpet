<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FatPet - Daftar Transaksi</title>
  <link href="./output.css" rel="stylesheet" />
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body class="bg-gray-50">
  <header>
    <!-- Nav -->
    <nav style="background-color: #E3D0B6;">
      <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
        <a href="javascript:void(0)" onclick="history.back()" class="flex items-center space-x-3 rtl:space-x-reverse">
        <ion-icon name="arrow-back-outline" class="text-2xl text-black"></ion-icon>
        <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-black">FatPet</span>
      </a>
  
    <div class="right-4 flex items-center space-x-6">
    <a href="cart.html" class="flex items-center text-black hover:text-[#8F5E1C] transition">
    <ion-icon name="cart-outline" size="large"></ion-icon>
    </a>

  </div>
    </nav>
  </header>

  <div class="min-h-screen bg-gray-50 p-6 flex space-x-6">
  <!-- Sidebar -->
  <div class="w-1/4 bg-white rounded-lg shadow p-4">
    <div class="flex flex-col items-center mb-6">
      <img src="images/profile.jpeg" class="rounded-full mb-2 w-32 h-32" alt="Profile" />
      <p class="font-semibold text-xl">Erine</p>
      <p class="text-base text-gray-500">(+62) 8******63</p>
    </div>
    <div class="space-y-2 text-base">
      <p class="font-semibold text-gray-800">Kotak Masuk</p>
      <ul class="pl-2 space-y-1 text-gray-700">
        <a href="#">Chat</a>
      </ul>
      <ul class="pl-2 space-y-1 text-gray-700">
        <a href="#">Ulasan</a>
      </ul>

      <p class="font-semibold text-gray-800 mt-4">Pembelian</p>
      <ul class="pl-2 space-y-1 text-gray-700">
        <a href="#">Menunggu Pembayaran</a>
      </ul>
      <ul class="pl-2 space-y-1 text-gray-700">
        <a href="#">Daftar Transaksi</a>
      </ul>

      <p class="font-semibold text-gray-800 mt-4">Profil Saya</p>
      <ul class="pl-2 space-y-1 text-gray-700">
        <a href="#">Favorit</a>
      </ul>
      <ul class="pl-2 space-y-1 text-gray-700">
        <a href="#">Pengaturan</a>
      </ul>
    </div>
  </div>

  <div class="flex-1 bg-white rounded-lg shadow p-6">
    <!-- Header -->
    <div class="flex items-center space-x-2 mb-4">
      <ion-icon name="person-circle-outline" class="text-3xl"></ion-icon>
      <span class="font-semibold text-xl">Erine</span>
    </div>

    <!-- Tabs -->
    <div class="border-b mb-4">
      <ul class="flex space-x-18 text-center font-medium text-gray-500">
        <a href="profile.html" class="pb-1 hover:text-[#8F5E1C] cursor-pointer">Bio Data Diri</a>
        <a href="#" class="border-b-2 border-[#8F5E1C] text-[#8F5E1C] pb-1 cursor-pointer">Daftar Transaksi</a>
        <a href="#" class="pb-1 hover:text-[#8F5E1C] cursor-pointer">Daftar Alamat</a>
        <a href="#" class="pb-1 hover:text-[#8F5E1C] cursor-pointer">Pembayaran</a>
        <a href="#" class="pb-1 hover:text-[#8F5E1C] cursor-pointer">Notifikasi</a>
        <a href="#" class="pb-1 hover:text-[#8F5E1C] cursor-pointer">Keamanan</a>    </ul>
    </div>

      <!-- Konten Transaksi -->
    <div class="flex justify-left">
       <div id="transaksiContainer" class="flex flex-col items-start space-y-6 py-6"></div>
    </div>

    <footer class="bg-white text-black py-12 px-4">
    <div class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 text-sm">

      <div>
        <h2 class="text-lg font-semibold mb-3">FatPet</h2>
        <p class="text-gray-800 mb-2 text-xs py-3">Terbaik untuk Kebutuhan Hewan Peliharaan Anda</p>
      </div>
  
      <!-- Support -->
      <div>
        <h3 class="font-semibold mb-3">Support</h3>
        <p class="text-black text-xs mb-1 space-y-3">Email</p>
        <p class="text-gray-800 text-xs mb-1 space-y-3">FatPet@gmail.com</p>
        <p class="text-black text-xs mb-1 space-y-3">Contact</p>
        <p class="text-gray-800 text-xs mb-1 space-y-3">+62 | 812-9572-6063</p>
      </div>
  
      <!-- Account -->
      <div>
        <h3 class="font-semibold mb-3">Account</h3>
        <ul class="text-gray-800 text-xs space-y-3">
          <li><a href="profile.html">My Account</a></li>
          <li><a href="cart.html">Cart</a></li>
          <li><a href="#">Wishlist</a></li>
          <li><a href="#">Shop</a></li>
        </ul>
      </div>
  
      <!-- Metode Pembayaran -->
      <div>
        <h3 class="font-semibold mb-3">Metode Pembayaran</h3>
        <div class="grid grid-cols-2 gap-2 items-center">
          <img src="images/Gopay.png" alt="gopay" class="h-4">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR1SpRwqDxJbBTIX-k_dDsdgDdWbhu4TSY6SA&s" alt="BRI" class="h-4">
          <img src="images/ovo.png" alt="OVO" class="h-4">
          <img src="images/BNI.webp" alt="BNI" class="h-4">
          <img src="images/dana.png" alt="DANA" class="h-4">
          <img src="images/alfamart.png" alt="Alfamart" class="h-4">
          <img src="images/klik bca.jpeg" alt="Klik BCA" class="h-4">
          <img src="images/indomart.png" alt="Indomaret" class="h-4">
          <img src="images/mandiri.png" alt="Mandiri" class="h-4">
          <img src="https://storage.googleapis.com/storage-ajaib-prd-platform-wp-artifact/2019/12/Logo-BCA.jpg" alt="BCA" class="h-4">
        </div>
      </div>
  
      <!-- Jasa Pengiriman -->
      <div>
        <h3 class="font-semibold mb-3">Jasa Pengiriman</h3>
        <div class="grid grid-cols-2 gap-2 items-center">
          <img src="images/gosend.png" alt="GoSend" class="h-4">
          <img src="images/jne.png" alt="JNE" class="h-4">
          <img src="images/jnt.png" alt="J&T" class="h-4">
          <img src="images/sicepat.png" alt="SiCepat" class="h-4">
          <img src="images/grab exspress.png" alt="GrabExpress" class="h-4">
          <img src="images/anter aja.jpeg" alt="Anteraja" class="h-4">
          <img src="images/id express.png" alt="ID Express" class="h-4">
          <img src="images/lala move.png" alt="Lalamove" class="h-4">
        </div>
      </div>
  
      <!-- Download App -->
      <div>
        <h3 class="font-semibold mb-3">Download App</h3>
        <p class="text-gray-800 text-xs mb-2">Hemat Rp10.000 khusus pengguna baru</p>
        <div class="space-y-2">
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Google_Play_Store_badge_EN.svg/512px-Google_Play_Store_badge_EN.svg.png" alt="Google Play" class="w-24 h-auto">
          <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="App Store" class="w-24 h-auto">
        </div>
        <div class="flex space-x-3 text-white mt-4 text-sm">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>
    </div>
  
    <div class="mt-10 text-center text-gray-500 text-xs">
      Â© 2025 FatPet.
    </div>
  </footer>

<!-- Sudah kamu pakai, tidak perlu diubah -->
<script>
  const container = document.getElementById('transaksiContainer');

  function formatRupiah(angka) {
    return 'Rp' + angka.toLocaleString('id-ID');
  }

  function hapusTransaksi(id) {
    let daftar = JSON.parse(localStorage.getItem('daftarTransaksi')) || [];
    const transaksiBaru = daftar.filter(item => item.id !== id);
    localStorage.setItem('daftarTransaksi', JSON.stringify(transaksiBaru));

    const el = document.getElementById(`transaksi-${id}`);
    if (el) el.remove();

    if (transaksiBaru.length === 0) {
      container.innerHTML = '<p class="text-gray-600">Belum ada transaksi.</p>';
    }
  }

  async function tampilkanDaftarTransaksi() {
    localStorage.removeItem("checkout");
    localStorage.removeItem("checkoutKeranjang");

    const daftar = JSON.parse(localStorage.getItem('daftarTransaksi')) || [];
    container.innerHTML = '';

    if (daftar.length === 0) {
      container.innerHTML = '<p class="text-gray-600">Belum ada transaksi.</p>';
      return;
    }

    for (const transaksi of [...daftar].reverse()) {
      const item = transaksi.items[0];

      try {
        const res = await fetch(`https://fakestoreapi.com/products/${item.id}`);
        const product = await res.json();

        const wrapper = document.createElement('div');
        wrapper.className = "w-[300px] mb-6";
        wrapper.id = `transaksi-${transaksi.id}`;

        const card = document.createElement('div');
        card.className = "bg-white shadow rounded-lg p-4 space-y-3";

        card.innerHTML = `
          <div class="flex justify-between items-center">
            <div>
              <p class="text-sm text-gray-600 font-semibold">Belanja</p>
              <p class="text-xs text-gray-500">${transaksi.tanggal}</p>
            </div>
            <span class="bg-[#D7B899] text-white text-xs font-semibold py-1 px-3 rounded">Sedang DiKemas</span>
          </div>

          <div class="flex items-center space-x-3">
            <img src="${product.image}" alt="${product.title}" class="w-16 h-16 object-contain rounded-md" />
            <div class="flex-1">
              <p class="text-sm font-semibold leading-snug line-clamp-2">${product.title}</p>
              <p class="text-xs text-gray-500 mt-1">${item.jumlah} Barang</p>
            </div>
          </div>

          <div class="flex justify-between items-center pt-2">
            <div>
              <p class="text-sm text-gray-600">Total</p>
              <p class="text-base font-bold text-gray-800">${formatRupiah(transaksi.total)}</p>
            </div>
            <div class="flex gap-2">
              <button class="text-[#8F5E1C] border border-[#8F5E1C] text-sm px-4 py-1 rounded hover:bg-[#8F5E1C] hover:text-white transition">Lacak</button>
              <button onclick="hapusTransaksi('${transaksi.id}')" class="bg-red-600 text-sm px-3 py-1 rounded hover:bg-red-400">Hapus</button>
            </div>
          </div>
        `;

        wrapper.appendChild(card);
        container.appendChild(wrapper);
      } catch (err) {
        console.error('Gagal memuat produk:', err);
      }
    }
  }

  tampilkanDaftarTransaksi();
</script>


</body>
</html>
