<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FatPet - Detail Produk</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body class="bg-gray-50">

<header>
  <nav style="background-color: #E3D0B6;">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
      <a href="homepage.html" class="flex items-center space-x-3 rtl:space-x-reverse">
        <ion-icon name="arrow-back-outline" class="text-2xl text-black"></ion-icon>
        <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-black">FatPet</span>
      </a>
      <div class="right-4 flex items-center space-x-6">
        <a href="cart.html" class="flex items-center text-black hover:text-[#8F5E1C] transition">
          <ion-icon name="cart-outline" size="large"></ion-icon>
        </a>
        <a href="profile.html" class="flex items-center text-black hover:text-[#8F5E1C] transition">
          <ion-icon name="person-circle-outline" size="large"></ion-icon>
        </a>
      </div>
    </div>
  </nav>
</header>

<main class="max-w-6xl mx-auto px-4 py-6">
  <!-- Breadcrumb -->
  <nav class="text-sm text-gray-600 mb-4">
    <a href="homepage.html" class="text-blue-600 hover:underline">FatPet</a> &gt;
    <span id="product-breadcrumb" class="font-semibold text-gray-900"></span>
  </nav>

  <!-- Product Card -->
  <section class="bg-white rounded-xl shadow-md p-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
      <!-- Gambar -->
      <div class="flex flex-col items-center">
        <img id="product-image" src="" alt="Produk" class="rounded-xl shadow max-h-80 object-contain mb-4" />
        <div class="flex gap-2">
          <img id="thumb1" src="" alt="Thumbnail 1" class="w-16 h-16 object-cover border rounded-md cursor-pointer" />
          <img id="thumb2" src="" alt="Thumbnail 2" class="w-16 h-16 object-cover border rounded-md cursor-pointer" />
        </div>
      </div>

      <!-- Detail -->
      <div>
        <h1 id="product-title" class="text-2xl font-bold mb-2 leading-snug"></h1>
        <p class="text-sm text-gray-600 mb-1">
          Terjual <span class="font-medium">4 rb+</span> &middot;
          <ion-icon name="star" class="align-middle"></ion-icon>
          <span id="product-rating" class="ml-1 align-middle"></span>
        </p>
        <p id="product-price" class="text-2xl font-bold text-amber-600 mt-2 mb-2"></p>
        <p class="text-sm text-green-600 mb-4">Stok: Tersedia</p>

        <div class="mb-4">
          <p class="font-semibold mb-2">Pilih warna:</p>
          <div class="flex flex-wrap gap-2">
            <button class="px-4 py-1 border border-gray-400 rounded-full text-sm hover:bg-gray-100">Hitam</button>
            <button class="px-4 py-1 border border-gray-400 rounded-full text-sm hover:bg-gray-100">Putih</button>
            <button class="px-4 py-1 border border-gray-400 rounded-full text-sm hover:bg-gray-100">Abu</button>
          </div>
        </div>

        <div class="my-4">
          <p class="font-semibold mb-1">Deskripsi:</p>
          <p id="product-description" class="text-sm text-gray-700 leading-relaxed"></p>

          <!-- Quantity selector -->
          <div class="mt-4">
            <label for="quantity" class="font-semibold mb-1 block">Jumlah:</label>
            <div class="flex items-center space-x-2 max-w-xs">
              <button id="qty-minus" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">-</button>
              <input type="number" id="quantity" class="w-16 text-center border border-gray-300 rounded" min="1" value="1" />
              <button id="qty-plus" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">+</button>
            </div>
          </div>
        </div>

        <div class="flex flex-wrap gap-4 mt-6">
          <button id="btn-beli-sekarang" class="border-2 border-orange-600 text-orange-600 px-6 py-2.5 rounded-xl hover:bg-orange-100 transition duration-200 ease-in-out">
            Beli Sekarang
          </button>
          <button id="tambah-keranjang" class="border-2 border-orange-600 text-orange-600 px-6 py-2.5 rounded-xl hover:bg-orange-100 transition duration-200 ease-in-out">
            + Masukkan Keranjang
          </button>    
        </div>
      </div>
    </div>
  </section>
</main>

  <footer class="bg-white text-black py-12 px-4">
    <div class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 text-sm">

      <div>
        <h2 class="text-lg font-semibold mb-3">FatPet</h2>
        <p class="text-gray-800 mb-2 text-xs py-3">Terbaik untuk Kebutuhan Hewan Peliharaan Anda</p>
      </div>
  
      <!-- Support -->
      <div>
        <h3 class="font-semibold mb-3">Support</h3>
        <p class="text-black text-xs mb-1 space-y-3">Email</p>
        <p class="text-gray-800 text-xs mb-1 space-y-3">FatPet@gmail.com</p>
        <p class="text-black text-xs mb-1 space-y-3">Contact</p>
        <p class="text-gray-800 text-xs mb-1 space-y-3">+62 | 812-9572-6063</p>
      </div>
  
      <!-- Account -->
      <div>
        <h3 class="font-semibold mb-3">Account</h3>
        <ul class="text-gray-800 text-xs space-y-3">
          <li><a href="profile.html">My Account</a></li>
          <li><a href="cart.html">Cart</a></li>
          <li><a href="#">Wishlist</a></li>
          <li><a href="#">Shop</a></li>
        </ul>
      </div>
  
      <!-- Metode Pembayaran -->
      <div>
        <h3 class="font-semibold mb-3">Metode Pembayaran</h3>
        <div class="grid grid-cols-2 gap-2 items-center">
          <img src="images/Gopay.png" alt="gopay" class="h-4">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR1SpRwqDxJbBTIX-k_dDsdgDdWbhu4TSY6SA&s" alt="BRI" class="h-4">
          <img src="images/ovo.png" alt="OVO" class="h-4">
          <img src="images/BNI.webp" alt="BNI" class="h-4">
          <img src="images/dana.png" alt="DANA" class="h-4">
          <img src="images/alfamart.png" alt="Alfamart" class="h-4">
          <img src="images/klik bca.jpeg" alt="Klik BCA" class="h-4">
          <img src="images/indomart.png" alt="Indomaret" class="h-4">
          <img src="images/mandiri.png" alt="Mandiri" class="h-4">
          <img src="https://storage.googleapis.com/storage-ajaib-prd-platform-wp-artifact/2019/12/Logo-BCA.jpg" alt="BCA" class="h-4">
        </div>
      </div>
  
      <!-- Jasa Pengiriman -->
      <div>
        <h3 class="font-semibold mb-3">Jasa Pengiriman</h3>
        <div class="grid grid-cols-2 gap-2 items-center">
          <img src="images/gosend.png" alt="GoSend" class="h-4">
          <img src="images/jne.png" alt="JNE" class="h-4">
          <img src="images/jnt.png" alt="J&T" class="h-4">
          <img src="images/sicepat.png" alt="SiCepat" class="h-4">
          <img src="images/grab exspress.png" alt="GrabExpress" class="h-4">
          <img src="images/anter aja.jpeg" alt="Anteraja" class="h-4">
          <img src="images/id express.png" alt="ID Express" class="h-4">
          <img src="images/lala move.png" alt="Lalamove" class="h-4">
        </div>
      </div>
  
      <!-- Download App -->
      <div>
        <h3 class="font-semibold mb-3">Download App</h3>
        <p class="text-gray-800 text-xs mb-2">Hemat Rp10.000 khusus pengguna baru</p>
        <div class="space-y-2">
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Google_Play_Store_badge_EN.svg/512px-Google_Play_Store_badge_EN.svg.png" alt="Google Play" class="w-24 h-auto">
          <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="App Store" class="w-24 h-auto">
        </div>
        <div class="flex space-x-3 text-white mt-4 text-sm">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>
    </div>
  
    <div class="mt-10 text-center text-gray-500 text-xs">
      Â© 2025 FatPet.
    </div>
  </div>
  </footer>
  
<!-- Toast -->
<div id="toast" class="fixed bottom-5 right-5 bg-black text-white px-4 py-2 rounded shadow-lg hidden z-50"></div>

<script>
  let keranjang = [];

  function muatDariLocalStorage() {
    const data = localStorage.getItem("keranjang");
    if (data) keranjang = JSON.parse(data);
  }

  function simpanKeLocalStorage() {
    localStorage.setItem("keranjang", JSON.stringify(keranjang));
  }

  function tampilkanToast(pesan) {
    const toast = document.getElementById("toast");
    toast.textContent = pesan;
    toast.classList.remove("hidden");
    setTimeout(() => {
      toast.classList.add("hidden");
    }, 2000);
  }

  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");

  const title = document.getElementById("product-title");
  const image = document.getElementById("product-image");
  const price = document.getElementById("product-price");
  const rating = document.getElementById("product-rating");
  const breadcrumb = document.getElementById("product-breadcrumb");
  const description = document.getElementById("product-description");
  const btnKeranjang = document.getElementById("tambah-keranjang");
  const qtyInput = document.getElementById("quantity");
  const btnMinus = document.getElementById("qty-minus");
  const btnPlus = document.getElementById("qty-plus");
  const btnBeliSekarang = document.getElementById("btn-beli-sekarang");

  function updateQuantity(increment) {
    let current = parseInt(qtyInput.value) || 1;
    current += increment;
    if (current < 1) current = 1;
    qtyInput.value = current;
  }

  btnMinus.addEventListener("click", () => updateQuantity(-1));
  btnPlus.addEventListener("click", () => updateQuantity(1));

  async function fetchProduct() {
    try {
      const res = await fetch(`https://fakestoreapi.com/products/${id}`);
      if (!res.ok) throw new Error("Produk tidak ditemukan");
      const product = await res.json();

      title.textContent = product.title;
      image.src = product.image;
      breadcrumb.textContent = product.title;
      rating.textContent = `${product.rating.rate} (${product.rating.count} rating)`;
      const hargaIDR = Math.round(product.price * 1600);
      price.textContent = `Rp${hargaIDR.toLocaleString("id-ID")}`;
      description.textContent = product.description;

      document.getElementById("thumb1").src = product.image;
      document.getElementById("thumb2").src = product.image;

    } catch (error) {
      alert(error.message);
      window.location.href = "homepage.html";
    }
  }

  muatDariLocalStorage();
  fetchProduct();

  btnKeranjang.addEventListener("click", () => {
    const jumlah = parseInt(qtyInput.value);
    if (isNaN(jumlah) || jumlah < 1) {
      alert("Jumlah harus minimal 1");
      return;
    }
    const idx = keranjang.findIndex(item => item.id == id);
    if (idx !== -1) {
      keranjang[idx].jumlah += jumlah;
    } else {
      keranjang.push({ id, jumlah });
    }
    simpanKeLocalStorage();
    tampilkanToast("Produk berhasil ditambahkan ke keranjang");
  });

  btnBeliSekarang.addEventListener("click", () => {
    const jumlah = parseInt(qtyInput.value);
    if (isNaN(jumlah) || jumlah < 1) {
      alert("Jumlah harus minimal 1");
      return;
    }
    const checkout = [{ id, jumlah }];
    localStorage.setItem("checkout", JSON.stringify(checkout));
    window.location.href = "checkout.html";
  });
</script>

</body>
</html>
